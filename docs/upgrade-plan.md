# Legends 项目升级计划

## 升级目标
- 升级到最新的 polkadot-sdk
- 保持当前 6s 区块时间
- 更新代币信息为 BitNice (BN)
- 总量设置为 2.1 亿

## 共识算法建议
由于完整的比特币 PoW 实现复杂度极高，建议采用以下方案之一：

### 选项 1: 保持 BABE + GRANDPA（推荐）
- 优势：稳定、成熟、与 Polkadot 生态兼容
- 特点：快速最终性、低能耗
- 实现：相对简单的升级过程

### 选项 2: 混合共识（BTC 风格特性）
- 使用 Substrate PoW 引擎
- 实现类似比特币的工作量证明
- 保留一些 BTC 特性（如难度调整）

## 升级阶段

### 阶段 1: 环境准备
1. 安装最新的 Rust 和开发工具
2. 安装 `psvm` (Polkadot SDK Version Manager)
3. 备份当前项目状态

### 阶段 2: 依赖升级
1. 使用 `psvm` 升级到最新稳定版本
2. 解决依赖冲突
3. 更新 Cargo.toml 配置

### 阶段 3: 运行时配置调整
1. 更新运行时版本信息
2. 调整代币配置
3. 配置区块时间参数
4. 处理配置 trait 变更

### 阶段 4: 存储迁移
1. 分析存储变更
2. 实现必要的迁移脚本
3. 使用 try-runtime 测试迁移

### 阶段 5: 测试和验证
1. 单元测试
2. 集成测试
3. 基准测试
4. 本地网络测试

## 风险评估
- **高风险**: 存储迁移可能导致数据丢失
- **中风险**: 配置不兼容导致编译失败
- **低风险**: 性能问题

## 时间估算
- 完整升级: 4-6 周
- 基础功能升级: 2-3 周

## 下一步行动
1. 确认共识算法选择
2. 设置开发环境
3. 开始阶段 1 的实施 